<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="893px" preserveAspectRatio="none" style="width:528px;height:893px;background:#FFFFFF;" version="1.1" viewBox="0 0 528 893" width="528px" zoomAndPan="magnify"><defs/><g><rect fill="#E0FFFF" height="881.1797" style="stroke:#181818;stroke-width:0.5;" width="353" x="167" y="6"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="26" x="330.5" y="18.0669">火山</text><rect fill="#FAEBD7" height="542.0625" style="stroke:#181818;stroke-width:1.0;" width="10" x="71" y="269.5234"/><rect fill="#ADD8E6" height="425.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="233" y="386.0547"/><rect fill="#ADD8E6" height="40.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="238" y="516.5859"/><rect fill="#ADD8E6" height="34.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="238" y="777.4531"/><rect fill="#ADD8E6" height="44.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="446" y="269.5234"/><rect fill="none" height="132.3359" style="stroke:#000000;stroke-width:1.5;" width="321" x="24" y="687.25"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="76" x2="76" y1="72.7266" y2="836.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="238" x2="238" y1="72.7266" y2="836.5859"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="451" x2="451" y1="72.7266" y2="836.5859"/><rect fill="#FAEBD7" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84" x="34" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="57" x="47.5" y="45.1279">«Client»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="41" y="61.4248">Client App</text><rect fill="#FAEBD7" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="84" x="34" y="835.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="57" x="47.5" y="855.5811">«Client»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="70" x="41" y="871.8779">Client App</text><rect fill="#ADD8E6" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="171" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="76" x="200" y="45.1279">«AgentKit»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="178" y="61.4248">AgentKit Runtime</text><rect fill="#ADD8E6" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="134" x="171" y="835.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="76" x="200" y="855.5811">«AgentKit»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="120" x="178" y="871.8779">AgentKit Runtime</text><rect fill="#ADD8E6" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="386" y="25.1328"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="76" x="413" y="45.1279">«AgentKit»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="393" y="61.4248">Identity UserPool</text><rect fill="#ADD8E6" height="46.5938" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="130" x="386" y="835.5859"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="76" x="413" y="855.5811">«AgentKit»</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116" x="393" y="871.8779">Identity UserPool</text><rect fill="#FAEBD7" height="542.0625" style="stroke:#181818;stroke-width:1.0;" width="10" x="71" y="269.5234"/><rect fill="#ADD8E6" height="425.5313" style="stroke:#181818;stroke-width:1.0;" width="10" x="233" y="386.0547"/><rect fill="#ADD8E6" height="40.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="238" y="516.5859"/><rect fill="#ADD8E6" height="34.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="238" y="777.4531"/><rect fill="#ADD8E6" height="44.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="446" y="269.5234"/><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="521" x="0" y="103.293"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="521" y1="103.293" y2="103.293"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="521" y1="106.293" y2="106.293"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="232" x="144.5" y="92.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="213" x="150.5" y="108.7935">步骤0：配置Runtime入向身份验证</text><polygon fill="#181818" points="249,142.9922,239,146.9922,249,150.9922,245,146.9922" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="439,142.9922,449,146.9922,439,150.9922,443,146.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="243" x2="445" y1="146.9922" y2="146.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="255" y="141.9263">配置身份池作为入向身份源</text><path d="M162,159.9922 L162,199.9922 L313,199.9922 L313,169.9922 L303,159.9922 L162,159.9922 " fill="#FFFFE0" style="stroke:#181818;stroke-width:0.5;"/><path d="M303,159.9922 L303,169.9922 L313,169.9922 L303,159.9922 " fill="#FFFFE0" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="65" x="168" y="177.0591">绑定身份池</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="168" y="192.1919">绑定客户端ID（可选）</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="521" x="0" y="225.8242"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="521" y1="225.8242" y2="225.8242"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="521" y1="228.8242" y2="228.8242"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="303" x="109" y="215.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="284" x="115" y="231.3247">步骤1：OAuth2 标准交互（客户端 ↔ 身份池）</text><polygon fill="#181818" points="434,265.5234,444,269.5234,434,273.5234,438,269.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="81" x2="440" y1="269.5234" y2="269.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126" x="88" y="264.4575">发起OAuth2授权请求</text><polygon fill="#181818" points="92,309.7891,82,313.7891,92,317.7891,88,313.7891" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="86" x2="450" y1="313.7891" y2="313.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113" x="98" y="293.5903">返回Access Token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="206" x="98" y="308.7231">（JWT格式，包含issuer/client_id）</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="521" x="0" y="342.3555"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="521" y1="342.3555" y2="342.3555"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="521" y1="345.3555" y2="345.3555"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="267" x="127" y="331.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="248" x="133" y="347.856">步骤2：客户端请求服务端（携带Token）</text><polygon fill="#181818" points="221,382.0547,231,386.0547,221,390.0547,225,386.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="81" x2="227" y1="386.0547" y2="386.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="88" y="380.9888">发起业务请求</text><path d="M5,399.0547 L5,439.0547 L309,439.0547 L309,409.0547 L299,399.0547 L5,399.0547 " fill="#FFFFE0" style="stroke:#181818;stroke-width:0.5;"/><path d="M299,399.0547 L299,409.0547 L309,409.0547 L299,399.0547 " fill="#FFFFE0" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165" x="11" y="416.1216">请求头中携带Access Token</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="279" x="15" y="431.2544">"Authorization": "Bearer {{access_token}}"</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="521" x="0" y="464.8867"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="521" y1="464.8867" y2="464.8867"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="521" y1="467.8867" y2="467.8867"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="254" x="133.5" y="454.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="235" x="139.5" y="470.3872">步骤3：服务端验证Token（JWT解析）</text><line style="stroke:#181818;stroke-width:1.0;" x1="243" x2="290" y1="503.5859" y2="503.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="290" x2="290" y1="503.5859" y2="516.5859"/><line style="stroke:#181818;stroke-width:1.0;" x1="249" x2="290" y1="516.5859" y2="516.5859"/><polygon fill="#181818" points="259,512.5859,249,516.5859,259,520.5859,255,516.5859" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189" x="255" y="498.52">1. 按JWT方式解析Access Token</text><line style="stroke:#181818;stroke-width:1.0;" x1="248" x2="290" y1="555.7188" y2="555.7188"/><line style="stroke:#181818;stroke-width:1.0;" x1="290" x2="290" y1="555.7188" y2="568.7188"/><line style="stroke:#181818;stroke-width:1.0;" x1="243" x2="290" y1="568.7188" y2="568.7188"/><polygon fill="#181818" points="253,564.7188,243,568.7188,253,572.7188,249,568.7188" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="255" y="550.6528">2. 验证解析出来的Claims</text><path d="M99,576.7188 L99,631.7188 L377,631.7188 L377,586.7188 L367,576.7188 L99,576.7188 " fill="#FFFFE0" style="stroke:#181818;stroke-width:0.5;"/><path d="M367,576.7188 L367,586.7188 L377,586.7188 L367,576.7188 " fill="#FFFFE0" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91" x="105" y="593.7856">核心验证逻辑：</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="105" y="608.9185">- "iss" 与用户池ID一致</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="257" x="105" y="624.0513">- "client_id" 与指定的客户端ID一致（可选）</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="521" x="0" y="657.6836"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="521" y1="657.6836" y2="657.6836"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="521" y1="660.6836" y2="660.6836"/><rect fill="#EEEEEE" height="23.1328" style="stroke:#000000;stroke-width:2.0;" width="145" x="188" y="647.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="126" x="194" y="663.1841">步骤4：验证结果处理</text><path d="M24,687.25 L88,687.25 L88,694.3828 L78,704.3828 L24,704.3828 L24,687.25 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="132.3359" style="stroke:#000000;stroke-width:1.5;" width="321" x="24" y="687.25"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="39" y="700.3169">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="54" x="103" y="699.4604">[验证失败]</text><polygon fill="#181818" points="92,721.5156,82,725.5156,92,729.5156,88,725.5156" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="86" x2="232" y1="725.5156" y2="725.5156"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="98" y="720.4497">返回认证失败（401）</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="24" x2="345" y1="734.5156" y2="734.5156"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="54" x="29" y="744.7261">[验证通过]</text><line style="stroke:#181818;stroke-width:1.0;" x1="243" x2="290" y1="764.4531" y2="764.4531"/><line style="stroke:#181818;stroke-width:1.0;" x1="290" x2="290" y1="764.4531" y2="777.4531"/><line style="stroke:#181818;stroke-width:1.0;" x1="249" x2="290" y1="777.4531" y2="777.4531"/><polygon fill="#181818" points="259,773.4531,249,777.4531,259,781.4531,255,777.4531" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78" x="255" y="759.3872">执行业务逻辑</text><polygon fill="#181818" points="87,807.5859,77,811.5859,87,815.5859,83,811.5859" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="81" x2="237" y1="811.5859" y2="811.5859"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128" x="93" y="806.52">返回业务响应（200）</text><!--SRC=[XLJHJXD157tVhxXPNWMXyaI4134nA8a6DSQ4nApT2KnOTklk5aH20Y8KJ96YZGyL2MfH8w6a4KCjHVx5x4otJ_o2TtQsorOGNvhip3tdddFkdJhZr4nfjZO1-ElI94rffWip2i0rBJa-QbjfKn-m3Ck-UdN0eCHq-_e0A-YJD9aQeouvhx1_5EjkKL5gqD4nzx6H9igiuaIjJCibv_M08L7-a1Y6DILkBLidjhovOMlJBHoQRLjJ0KdObIr-R-HBs7EOw7WwH4toWEhk62GGfyJTgT89zATIAcWEX9-d3fN7rbDGw_Cxh5nMeIqmaPpMp5QMfaqOJcCW4oJWkaliIM93F8HMrA2EvzITXliEiUzObX701lLKAuQOEg0AHUdj1RwxtVXMx3of5HgBg_MZKjYFBMwptBfVtV4EZnhVilxUFFJsAaq1xUrzWhK794QMyVAMTxJXLQfnBA_cb60YbW1AV0_K3zTPgH31Hanvm4eV-V91VMTlyFf9RPcjxJNcLavgAp6TNQZpTd_Q7Ki0tygmp99NBNhLrwAwYONVItc8g14kX8TJQCfcQ-l-ZmD9n5yjy_SB_ju1BpzNjAHB9pMK6mBQMjOnkXM9jfskd_WKaKXG3_Z7UVPkip-P98u3zwnnOewOAF7cWtjygyPgQoUrBCikijmETPmqiIyd0zmZgWkpEectYNbFeFV8fTJBDrRPom_uYUmyLsMLpq6tCwQRkKlVNgM0gByTXxEDsJgTcsIw5F58B2lkUvLTsRVLBEulHclPz9dcKijKUq2zHZGRcMPcjA3oaIigPsVLcC4hQ31o99Skj2EYyxzyufkvq5eeDcQjgmDuTaL4_FOdHYohuwekSdgMBj41Ke4aOfagVxzTBxmOC3GwuSI7917dB3dVgh3Z1SdIc3lqVwsZln6p7LGSkmfUvLKz_nMdYLiwUDshpFcP_U0sseQWXcSp-3AmS-nnoE9_F95kyPI3flN3DtnpWnLVr7DB8ZJDS4DJh5ZszxVnZwnf_Cpo-gLYL8UDkZkxH1TYE0IQZWh-SIP6SPeTN_dYVyZABPF6iUo2z2-G8KdOcrLMpQECH6Uda05mDl__dadYuByFW_W3]--></g></svg>